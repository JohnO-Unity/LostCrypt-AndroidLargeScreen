package com.unity.lostcryptlargescreenexample;

import com.unity3d.player.UnityPlayerActivity;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.content.res.Configuration;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;

//Android Jetpack WindowManager Imports
import androidx.annotation.NonNull;
import androidx.core.util.Consumer;
import androidx.window.java.layout.WindowInfoTrackerCallbackAdapter;
import androidx.window.layout.DisplayFeature;
import androidx.window.layout.FoldingFeature;
import androidx.window.layout.WindowInfoTracker;
import androidx.window.layout.WindowLayoutInfo;
import androidx.window.layout.WindowMetrics;
import androidx.window.layout.WindowMetricsCalculator; 

public class JetpackWindowManager extends UnityPlayerActivity {
    // This ensures the layout will be correct.
    @Override public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
		
        // This will appear in the Android logcat
        Log.d("UnityActivity.ConfigurationManager", newConfig.toString());

		// This will be sent to the C# layer in Unity, and can be received by game objects
        // The protected variable mUnityPlayer is declared in the UnityPlayerActivity class
        mUnityPlayer.UnitySendMessage("ConfigurationManager", "onConfigurationChanged", newConfig.toString());
    }

    private static LayoutStateChangeCallback layoutStateChangeCallback;
    private static WindowInfoTrackerCallbackAdapter wit;
    private static WindowMetricsCalculator wmc;

    public static native void OnLayoutChanged(FoldableLayoutInfo resultInfo);
}